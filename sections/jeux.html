<style>
  .section-heading { display:flex; align-items:center; gap:10px; }
  .section-heading .icon-svg { width:28px; height:28px; transition: transform 0.18s ease; }
  .section-heading:hover .icon-svg { transform: scale(1.12); }
  .options button { transition: transform 0.12s ease, box-shadow 0.12s ease; }
  .options button:hover { transform: translateY(-3px); box-shadow: 0 8px 16px rgba(0,0,0,0.14); }
</style>
<h2 class="section-heading"><svg class="icon-svg" aria-hidden="true"><use href="#icon-game"></use></svg> <span>Quiz Biblique √âvolutif</span></h2>

<style>
  .quiz-container {
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    padding: 20px;
    max-width: 700px;
    margin: auto;
  }
  .question {
    margin: 20px 0;
    font-size: 18px;
    font-weight: 500;
  }
  .options button {
    display: block;
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    cursor: pointer;
    background: rgba(255,255,255,0.1);
    color: white;
    transition: all 0.3s;
    font-size: 14px;
  }
  .options button:hover {
    background: rgba(255,255,255,0.2);
    border-color: rgba(255,255,255,0.4);
  }
  .options button:active {
    background: rgba(100,200,255,0.4);
  }
  #result {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    padding: 15px;
    background: rgba(26,188,156,0.2);
    border-radius: 8px;
  }
  .progress-bar {
    width: 100%;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    margin: 15px 0;
    height: 20px;
    overflow: hidden;
  }
  .progress {
    height: 100%;
    background: linear-gradient(90deg, #1abc9c, #16a085);
    width: 0%;
    transition: width 0.3s;
  }
  #restartBtn {
    margin-top: 15px;
    padding: 12px 30px;
    background: linear-gradient(90deg, #6a11cb, #2575fc);
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-size: 16px;
    transition: transform 0.2s;
  }
  #restartBtn:hover {
    transform: scale(1.05);
  }
</style>

<div class="quiz-container">
  <div id="quiz"></div>
  <div class="progress-bar"><div id="progress" class="progress"></div></div>
  <div id="result"></div>
  <button id="restartBtn" onclick="restartQuiz()" style="display:none;">Rejouer</button>
</div>

<script>
  // Niveau 1 : 10 questions
  const niveau1 = [
    {question:"Qui a construit l'arche ?", options:["Mo√Øse","No√©","Abraham","David"], answer:1},
    {question:"Combien de jours pour la cr√©ation ?", options:["3","5","6","7"], answer:2},
    {question:"Qui a reni√© J√©sus trois fois ?", options:["Jean","Pierre","Jacques","Thomas"], answer:1},
    {question:"Premier livre de la Bible ?", options:["Exode","Gen√®se","Psaumes","Matthieu"], answer:1},
    {question:"Qui a tu√© Goliath ?", options:["Sa√ºl","David","Samuel","Josu√©"], answer:1},
    {question:"Qui a re√ßu les 10 commandements ?", options:["Mo√Øse","Aaron","Josu√©","√âlie"], answer:0},
    {question:"O√π J√©sus est n√© ?", options:["Nazareth","Bethl√©em","J√©rusalem","Capharna√ºm"], answer:1},
    {question:"Combien de disciples ?", options:["10","11","12","13"], answer:2},
    {question:"Qui a √©crit la plupart des Psaumes ?", options:["Mo√Øse","David","Salomon","√âsa√Øe"], answer:1},
    {question:"Qui a √©t√© aval√© par un grand poisson ?", options:["Jonas","√âlie","Paul","Pierre"], answer:0}
  ];

  // Niveau 2 : 15 questions
  const niveau2 = [
    ...niveau1,
    {question:"Qui est la m√®re de J√©sus ?", options:["Marie","√âlisabeth","Rachel","Sara"], answer:0},
    {question:"Quel roi √©tait connu pour sa sagesse ?", options:["Sa√ºl","David","Salomon","√âz√©chias"], answer:2},
    {question:"Qui a trahi J√©sus ?", options:["Pierre","Judas","Jean","Thomas"], answer:1},
    {question:"Quel proph√®te a d√©fi√© les proph√®tes de Baal ?", options:["√âsa√Øe","√âlie","√âz√©chiel","Daniel"], answer:1},
    {question:"Combien de livres dans la Bible ?", options:["60","61","66","70"], answer:2}
  ];

  // Niveau 3 : 30 questions
  const niveau3 = [
    ...niveau2,
    {question:"Qui a √©t√© jet√© dans la fosse aux lions ?", options:["Daniel","Joseph","√âlie","Paul"], answer:0},
    {question:"Qui a interpr√©t√© les r√™ves de Pharaon ?", options:["Mo√Øse","Joseph","Aaron","David"], answer:1},
    {question:"Quel ap√¥tre a √©crit la plupart des lettres du Nouveau Testament ?", options:["Pierre","Paul","Jean","Jacques"], answer:1},
    {question:"Qui a march√© sur l'eau vers J√©sus ?", options:["Pierre","Jean","Jacques","Thomas"], answer:0},
    {question:"Quel est le dernier livre de la Bible ?", options:["Apocalypse","Actes","Romains","H√©breux"], answer:0},
    {question:"Qui a √©t√© transform√© en statue de sel ?", options:["Femme de Lot","Sara","Rachel","Marie"], answer:0},
    {question:"Qui a vu une √©chelle reliant ciel et terre ?", options:["Jacob","Joseph","Mo√Øse","√âsa√Øe"], answer:0},
    {question:"Qui a √©crit l'Apocalypse ?", options:["Jean","Pierre","Paul","Jacques"], answer:0},
    {question:"Quel proph√®te a vu des ossements revivre ?", options:["√âz√©chiel","√âsa√Øe","Daniel","J√©r√©mie"], answer:0},
    {question:"Qui a √©t√© vendu par ses fr√®res ?", options:["Joseph","Benjamin","Mo√Øse","David"], answer:0},
    {question:"Qui a pri√© trois fois par jour ?", options:["Daniel","David","Paul","Pierre"], answer:0},
    {question:"Qui a √©t√© roi apr√®s Sa√ºl ?", options:["David","Salomon","Josu√©","√âz√©chias"], answer:0},
    {question:"Qui a √©crit les Proverbes ?", options:["Mo√Øse","David","Salomon","√âsa√Øe"], answer:2},
    {question:"Qui a √©t√© sauv√© dans la fournaise ardente ?", options:["Shadrac, M√©schac et Abed-Nego","Daniel","Joseph","√âlie"], answer:0},
    {question:"Qui a √©t√© appel√© 'ami de Dieu' ?", options:["Mo√Øse","Abraham","David","Josu√©"], answer:1}
  ];

  // Niveau 4 : 40 questions
  const niveau4 = [
    ...niveau3,
    {question:"Qui a √©crit l'√âvangile selon Luc ?", options:["Luc","Jean","Marc","Matthieu"], answer:0},
    {question:"Qui a √©t√© le premier martyr chr√©tien ?", options:["√âtienne","Jacques","Jean","Paul"], answer:0},
    {question:"Qui a baptis√© J√©sus ?", options:["Jean-Baptiste","Pierre","Paul","Jacques"], answer:0},
    {question:"Qui a √©t√© roi apr√®s David ?", options:["Salomon","Sa√ºl","Josu√©","√âz√©chias"], answer:0},
    {question:"Qui a vu J√©sus ressuscit√© en premier ?", options:["Pierre","Jean","Marie-Madeleine","Thomas"], answer:2},
    {question:"Qui a √©crit l'√©p√Ætre aux H√©breux ?", options:["Paul","Auteur inconnu","Pierre","Jean"], answer:1},
    {question:"Quel proph√®te a proph√©tis√© l'exil √† Babylone ?", options:["Daniel","√âsa√Øe","√âz√©chiel","J√©r√©mie"], answer:2},
    {question:"Qui a √©t√© roi quand J√©sus est n√© ?", options:["H√©rode","C√©sar","Pilate","N√©ron"], answer:0},
    {question:"Qui a √©t√© appel√© 'fils du tonnerre' ?", options:["Jean et Jacques","Pierre et Andr√©","Paul et Barnabas","Timoth√©e et Tite"], answer:0},
    {question:"Qui a √©crit le Cantique des Cantiques ?", options:["David","Salomon","Mo√Øse","√âsa√Øe"], answer:1}
  ];

  let niveaux = [niveau1, niveau2, niveau3, niveau4];
  let currentLevel = 0;
  let currentQuestion = 0;
  let score = 0;
  let levelScores = [];

  function showQuestion() {
    const quizDiv = document.getElementById("quiz");
    quizDiv.innerHTML = "";

    let questions = niveaux[currentLevel];
    if(currentQuestion < questions.length) {
      const q = questions[currentQuestion];
      quizDiv.innerHTML = "<div class='question'>" + q.question + "</div>";

      const optionsDiv = document.createElement("div");
      optionsDiv.className = "options";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i, btn);
        optionsDiv.appendChild(btn);
      });

      quizDiv.appendChild(optionsDiv);

      // Progression visuelle
      let progressPercent = ((currentQuestion + 1) / questions.length) * 100;
      document.getElementById("progress").style.width = progressPercent + "%";
      document.getElementById("restartBtn").style.display = "none";
    } else {
      // Fin du niveau
      let grade = getGrade(score, questions.length);
      let message = getMotivation(grade);
      document.getElementById("result").innerHTML =
        "Niveau " + (currentLevel + 1) + " termin√© üéâ<br>Score : " + score + "/" + questions.length +
        " | Grade : <strong>" + grade + "</strong><br>" + message;

      // Passage automatique au niveau suivant
      if(currentLevel < niveaux.length - 1) {
        document.getElementById("result").innerHTML +=
          "<br><br><small>Passage au niveau suivant en 4s...</small>";
        currentLevel++;
        currentQuestion = 0;
        score = 0;
        setTimeout(showQuestion, 4000);
      } else {
        document.getElementById("result").innerHTML +=
          "<br><br><strong>üèÜ Tous les niveaux compl√©t√©s !</strong>";
        document.getElementById("restartBtn").style.display = "block";
      }
    }
  }

  function checkAnswer(selected, btn) {
    let questions = niveaux[currentLevel];
    let correct = selected === questions[currentQuestion].answer;
    
    if(correct) {
      score++;
      btn.style.background = "rgba(26,188,156,0.5)";
    } else {
      btn.style.background = "rgba(231,76,60,0.5)";
      let correctBtn = document.querySelectorAll(".options button")[questions[currentQuestion].answer];
      correctBtn.style.background = "rgba(26,188,156,0.5)";
    }

    document.querySelectorAll(".options button").forEach(b => b.disabled = true);
    setTimeout(() => {
      currentQuestion++;
      showQuestion();
    }, 1500);
  }

  function restartQuiz() {
    currentLevel = 0;
    currentQuestion = 0;
    score = 0;
    levelScores = [];
    document.getElementById("result").innerHTML = "";
    document.getElementById("progress").style.width = "0%";
    document.getElementById("restartBtn").style.display = "none";
    showQuestion();
  }

  function getGrade(score, total) {
    let percent = (score / total) * 100;
    if(percent < 50) return "Croyant";
    else if(percent < 70) return "Disciple";
    else if(percent < 85) return "Ouvrier";
    else if(percent < 95) return "Pasteur";
    else return "Docteur";
  }

  function getMotivation(grade) {
    switch(grade) {
      case "Croyant": return "Continue, chaque pas te rapproche de la v√©rit√© ‚ú®";
      case "Disciple": return "Tu avances bien, garde la foi üôè";
      case "Ouvrier": return "Tu sers avec fid√©lit√©, pers√©v√®re üí™";
      case "Pasteur": return "Tu conduis avec sagesse, reste humble üåü";
      case "Docteur": return "Excellence ! Tu es une source d'inspiration üìñüî•";
      default: return "";
    }
  }

  showQuestion();
</script>